<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2020-02-06 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>qcr-maven-plugin Maven Mojo - </title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20200206" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                qcr-maven-plugin Maven Mojo
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2020-02-06</span>
                  &nbsp;| <span id="projectVersion">Version: LATEST</span>
                      </div>
            <div class="xright">                    <a href="./" title="qcr-maven-plugin Maven Mojo">qcr-maven-plugin Maven Mojo</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                          <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                              <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                      <li class="expanded">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                    <ul>
                      <li class="none">
                          <a href="QcrReportFile98.html" title="QC98 Non regression report">QC98 Non regression report</a>
            </li>
                      <li class="none">
                          <a href="QcrReportFile02.html" title="QC02 Class hierarchy">QC02 Class hierarchy</a>
            </li>
                      <li class="none">
            <strong>QC01 Rules violations</strong>
          </li>
                      <li class="none">
                          <a href="QcrReportFile12.html" title="QC12 Global security">QC12 Global security</a>
            </li>
                      <li class="none">
                          <a href="QcrReportFile99.html" title="QC99 Email dispatch of critical informations">QC99 Email dispatch of critical informations</a>
            </li>
              </ul>
        </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <br /><script src="https://code.jquery.com/jquery-3.4.1.js" type="text/javascript"></script><script src="./QcrReportFile01commun.js" type="text/javascript"></script><br />
<div id="theDivSommaire"></div>
<div id="theDivContent"></div><script type="text/javascript">
//<![CDATA[
console.log("creerJavascriptPourSeq01 Debut");
var lien = window.location;
console.log("creerJavascriptPourSeq02 lien "+lien);
var url = new URL(lien);
var searchParams = new URLSearchParams(url.search);
console.log('creerJavascriptPourSeq03 searchParams     : '+searchParams);
var monNumFile = searchParams.get('numFile');
console.log('creerJavascriptPourSeq04 monNumFile       : '+monNumFile);
if (null==monNumFile) monNumFile = 1;
console.log('creerJavascriptPourSeq05 monNumFile       : '+monNumFile);
var monNumSeq = searchParams.get('numSeq');
console.log('creerJavascriptPourSeq06 monNumSeq        : '+monNumSeq);
if (null==monNumSeq) monNumSeq = 1;
console.log('creerJavascriptPourSeq07 monNumSeq        : '+monNumSeq);
var paramResourceKey = searchParams.get('resourceKey');
console.log('creerJavascriptPourSeq08 paramResourceKey : '+paramResourceKey);
var paramProjectKey = searchParams.get('id');
console.log('creerJavascriptPourSeq09 paramProjectKey  : '+paramProjectKey);
function calculerUrl(asSource) {
   var url = '';
   if (paramProjectKey!=null) {
      url = window.location.pathname+"?projectKey="+paramProjectKey+"&resourceKey="+paramResourceKey+"/"+asSource;
   } else {
      url = asSource;
   }
   return url;
}
function traiterJs(asSource) {
   console.log("traiterJs01 start");
   var url = calculerUrl(asSource);
   jQuery.ajaxSetup({
      async:false
   });
   console.log( "traiterJs02 avant jQuery.get sur "+url);
   var jqxhr = jQuery
   .getScript( url, function(response) {
       console.log( "traiterJs03 apres jQuery.get");
   })        
   //load(url);
console.log("traiterJs99 end");
}
var lsSource2 = "./QcrReportFile01File0commun.js";
traiterJs(lsSource2)
var lsSource1 = "./QcrReportFile01File"+monNumFile+"detailjsondata.js";
traiterJs(lsSource1)
// Chargement des src via load
console.log("apres traiterJs");
if (typeof(maDataBlocs) == 'undefined') {
   console.log('creerJavascriptPourSeq10 erreur (undefined==maDataBlocs)');
} else if (null==maDataBlocs) {
   console.log('creerJavascriptPourSeq11 erreur (null==maDataBlocs)');
} else if (null==maDataBlocs.data09a || null==maDataBlocs.data09b) {
   console.log('creerJavascriptPourSeq12 erreur (null==maDataBlocs.data09a ou data09b)');
} else {
   var monData09a = maDataBlocs.data09a;
   var monData09b = maDataBlocs.data09b;
   console.log('creerJavascriptPourSeq13 monData09a et monData09b charges');
}

function genererBlocSommaire() {
   console.log('creerJavascriptPourSeq genererBlocSommaire01 start');
   var lsStr = '';
   lsStr += '<h3>Table of contents</h3>';
   lsStr += '<br />';
   lsStr+='<table border="0" class="bodyTable">';
   lsStr+='<tr><td><a href="./QcrReportFile01File0.html?numFile='+monNumFile+'">Link to main board for '+maDataBlocs.data00.texte+'</a></td></tr>';
   lsStr+='<tr><td><a href="#sequence_list">Sequence list</a></td></tr>';
   lsStr+='<tr><td><a href="#sequence_graph">Sequence graph</a></td></tr>';
   lsStr+='</table><br />';
   var theDivSommaire = document.getElementById("theDivSommaire");  
   theDivSommaire.innerHTML = lsStr;
   console.log('creerJavascriptPourSeq genererBlocSommaire02 end');
}
function genererBlocContent() {
   console.log('creerJavascriptPourSeq genererBlocContent01 start');
   var lsStr = '';
   lsStr+='<h3><a name="sequence_list">Sequence list</a></h3><br />';   lsStr+='<table border="0" class="bodyTable">';
         lsStr+='<tr class="b">';         lsStr+='<th>Seq</th><th>Step</th><th>Source / Method / Target</th><th>Risk nature</th>';         lsStr+='</tr>';   for (var liInd=0; liInd<monData09b.length; liInd++) {
    if(monData09b[liInd].sequence.seq==monNumSeq) {
      if (0==(liInd%2)) lsStr+='<tr class="b">';
      if (1==(liInd%2)) lsStr+='<tr class="a">';
      lsStr+='<td>'+monData09b[liInd].sequence.seq+'</td><td></td><td></td><td></td>';
      lsStr+='</tr>';
      var contenu = monData09b[liInd].sequence.contenu;
      var lsColor = '';
      for (var liIndJ=0; liIndJ<contenu.length; liIndJ++) {
         if (contenu[liIndJ].ligne.c4!='') {
            lsColor='style="color : red"';
         } else {
            lsColor='';
         }
         if (0==(liIndJ%2)) lsStr+='<tr class="b" '+lsColor+'>';
         if (1==(liIndJ%2)) lsStr+='<tr class="a" '+lsColor+'>';
         lsStr+='<td></td><td>'+contenu[liIndJ].ligne.c1+'</td>';
         var lsStrLoc ='';
         if (typeof(contenu[liIndJ].ligne.c2)!='undefined')lsStrLoc+=contenu[liIndJ].ligne.c2;
         if (typeof(contenu[liIndJ].ligne.c3)!='undefined'){
             lsStrLoc+='<ul>';
             for (var liIndK=0; liIndK<contenu[liIndJ].ligne.c3.length; liIndK++) lsStrLoc+='<li>'+contenu[liIndJ].ligne.c3[liIndK]+'</li>';
             lsStrLoc+='</ul>';
         }
         lsStr+='<td>'+lsStrLoc+'</td>';
         if (contenu[liIndJ].ligne.c4!='') {
            lsStr+='<td>'+contenu[liIndJ].ligne.c4+'</td>';
         } else {
            lsStr+='<td></td>';
         }
         lsStr+='</tr>';
      }
    }
   }
   lsStr+='</table><br />';
   lsStr+='<h3><a name="sequence_graph">Sequence graph</a></h3><br />';   var theDivContent = document.getElementById("theDivContent");  
   theDivContent.innerHTML = lsStr;
   console.log('creerJavascriptPourSeq genererBlocContent99 end');
}
genererBlocSommaire();
genererBlocContent();
console.log("fin");
//]]>
</script><script src="http://visjs.org/dist/vis.js" type="text/javascript"></script><link href="http://visjs.org/dist/vis-network.min.css" type="text/css" rel="stylesheet"></link><script type="text/css" rel="stylesheet">
//<![CDATA[
    html, body {
      font: 10pt arial;
      padding: 0;
      margin: 0;
      width: 100%;
      height: 100%;
    }
    #mynetwork {
      width: 100%;
      height: 100%;
    }
]]>
</script>
<div id="theDivMainAnchor"></div><script type="text/javascript">
//<![CDATA[


    var mesNoeuds = null;
    var nodes     = null;
    var edges     = null;
    var network   = null;

	function init() {
		mesNoeuds = [];
   for (var liInd=0; liInd<monData09b.length; liInd++) {
    if(monData09b[liInd].sequence.seq==monNumSeq) {
      var contenu = monData09b[liInd].sequence.contenu;
      for (var liIndJ=0; liIndJ<contenu.length; liIndJ++) {
         if        (typeof(contenu[liIndJ].ligne.c2)!='undefined') {
            mesNoeuds.push({niv : contenu[liIndJ].ligne.c1 , libelle : contenu[liIndJ].ligne.c2, risk : contenu[liIndJ].ligne.c5});
         } else if (typeof(contenu[liIndJ].ligne.c3)!='undefined') {
            mesNoeuds.push({niv : contenu[liIndJ].ligne.c1 , libelle : contenu[liIndJ].ligne.c3[1], risk : contenu[liIndJ].ligne.c5});
         } else {
            console.log('erreur sur data09b.c2 ou .c3');
         }
      }
    }
   }

	}
    // Called when the Visualization API is loaded.
    function draw() {
      // Create a data table with nodes.
      nodes = [];

      // Create a data table with links.
      edges = [];
	  var liMass = 1;
	  var liFrom = -1;
	  var liTo   = -1;
	  for (var liI=0; liI<mesNoeuds.length; liI++) {
		if (0==liI || mesNoeuds.length-1==liI) {
	           liMass = 1.5;
		}
		if (0==liI || mesNoeuds.length-1==liI || mesNoeuds[liI].risk!="none") {
		   nodes.push({id : liI, label : '['+mesNoeuds[liI].niv+']'+mesNoeuds[liI].libelle, group : mesNoeuds[liI].risk, mass : liMass, size : 50});
	           liTo = liI;
	           if (0<=liFrom) {
			edges.push({from: liFrom, to : liTo});
	           }
	           liFrom = liI;
	           liTo   = -1;
		   //console.log('cas 01 risk '+mesNoeuds[liI].risk);
		} else if (mesNoeuds[liI].libelle=="dummymethode") {
		   //console.log('cas 02');
		} else {
		   nodes.push({id : liI, label : '['+mesNoeuds[liI].niv+']'+mesNoeuds[liI].libelle, group : mesNoeuds[liI].risk, mass : liMass});
	           liTo = liI;
	           if (0<=liFrom) {
			edges.push({from: liFrom, to : liTo});
	           }
	           liFrom = liI;
	           liTo   = -1;
		   //console.log('cas 03');
		}
	  }

      // create a network
      var container = document.getElementById('mynetwork');
      var data = {
        nodes: nodes,
        edges: edges
      };
      var options = {
        nodes: {
          scaling: {
            min: 16,
            max: 32
          }
        },
        edges: {
          color: 'gray',
          smooth: false
        },
        physics:{
          barnesHut:{gravitationalConstant:-40000},
          stabilization: {iterations:2500}
        },
        groups: {
          'start': {
            shape: 'square',
            color: '#109618' // green
          },
          'end': {
            shape: 'triangle',
            color: '#FFFFF' // black
          },
          'none': {
            shape: 'dot',
            color: '#2B7CE9' // blue
          },
          'secure': {
            shape: 'square',
            color: '#109618' // green
          },
          'atrisk': {
            shape: 'square',
            color: '#C5000B' // red
          },
          'input': {
            shape: 'triangleDown',
            color: '#C5000B' // red
          },
          'output': {
            shape: 'triangle',
            color: '#C5000B' // red
          }
        }
      };
      var network = new vis.Network(container, data, options);
      // force la hauteur cf https://github.com/almende/vis/issues/358 
      container.style.height = '500px';
      network.redraw();
    }
  


var lsStr = '';
lsStr+="<div id='mynetwork' >";
lsStr+="	<div 	class='vis-network' ";
lsStr+="			style='position: relative; overflow: hidden; touch-action: pan-y; -moz-user-select: none; width: 100%; height: 100%;' ";
lsStr+="			tabindex='900'> ";
lsStr+="		<canvas id='myCanvas' ";
lsStr+="			style='position: relative; touch-action: none; -moz-user-select: none; width: 100%; height: 100%;' ";
lsStr+="			width='1329' ";
lsStr+="			height='535'> ";
lsStr+="		</canvas> ";
lsStr+="	</div>";
lsStr+="</div>";
var theDivMainAnchor = document.getElementById("theDivMainAnchor");
theDivMainAnchor.innerHTML = lsStr;
console.log("avant init et draw");
init();
draw();
console.log("fin");

//]]>
</script>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2020.
          All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
